angular.module("hey",[]).factory("hey",["$rootScope",function(a){"use strict";function b(b,d,f){e[b]||(e[b]=[]),e[b].push({destroy:(f||a).$on(b,d),cb:d}),f&&f.$on("$destroy",function(){c(b,d)})}function c(a,b){function c(a){return b?a.cb===b:!0}var d,f=e[a];for(d=f.length-1;d>-1;d--)c(f[d])&&f.splice(d,1)[0].destroy()}function d(a,d,e){function f(){c(a,f),d.apply(null,arguments)}b(a,f,e)}var e={};return{listen:b,once:d,stop:c}}]);