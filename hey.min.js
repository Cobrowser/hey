angular.module("hey",[]).factory("hey",["$rootScope",function(a){"use strict";function b(b,d,e){f[b]||(f[b]=[]),f[b].push({destroy:(e||a).$on(b,d),cb:d}),e&&e.$on("$destroy",function(){c(b,d)})}function c(a,b){function c(a){return b?a.cb===b:!0}for(var d=f[a],e=d.length-1;e>-1;e--)c(d[e])&&d.splice(e,1)[0].destroy()}function d(a,d,e){function f(){c(a,f),d.apply(null,arguments)}b(a,f,e)}function e(b,c,d){return(d||a).$emit(b,c)}var f={};return{listen:b,once:d,stop:c,emit:e}}]);